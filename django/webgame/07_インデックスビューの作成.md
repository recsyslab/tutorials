# インデックスビューの作成

ビューは，リクエストオブジェクトを受け取って，レスポンスオブジェクトを返す役割を担います．では，`http://localhost:8000/touch/`にアクセスしたときに，`touch`アプリケーションのトップページが表示されるようにしてみましょう．`webgame/touch/views.py`に以下のコードを記述してください．

リスト1: `webgame/touch/views.py`
```py
from django.shortcuts import render
from django.http import HttpResponse
from django.views.generic import View


class IndexView(View):
    """
    インデックスビュー
    """
    def get(self, request, *args, **kwargs):
        # テンプレートのレンダリング
        return render(request, 'touch/index.html')


index = IndexView.as_view()
```

`IndexView`は，インデックスビューに対応するクラスベースビューです．`View`クラスを継承して定義します．クラスベースビューについては，文献[1][2]を参照してください．

このビューを呼ぶために，URLとビューとを対応付けておく必要があります．そのためには`URLconf`が必要になります．`touch/`に`urls.py`を新規作成します．この`webgame/touch/urls.py`に以下のコードを記述してください．

リスト2: `webgame/touch/urls.py`
```py
from django.urls import path
from . import views

app_name = 'touch'
urlpatterns = [
    # ex: touch/
    path('', views.index, name='index'),
]
```

さらに，この`webgame/touch/urls.py`の記述を反映させるために，次のように，`webgame/webgame/urls.py`に`django.urls.include`の`import`を追加し，`urlpatterns`リストに`'touch.urls'`に対応したパスを追加してください．

リスト3: `webgame/webgame/urls.py`
```py
from django.contrib import admin
from django.urls import path, include       # includeを追加

urlpatterns = [
    path('admin/', admin.site.urls),
    path('touch/', include('touch.urls')),  # 追加
]
```

ブラウザで下記のURLにアクセスしてみましょう．

`http://localhost:8000/touch/`

「Touch, touch, touch!へようこそ！」と表示されました．ページのタイトルは「Touch, touch, touch!」となっています．このページは，リスト1の12行目に記述されているように，`IndexView`クラスの`get()`メソッドにおいて，テンプレートがレンダリングされることで表示されます．では，URLにアクセスされた後，どのような流れでこのこの`get()`メソッドが表示されるのかについては，次回で説明します．

ビューの作成の詳細については，文献[3][4]を参照してください．

#### 参考
1. [クラスベースビュー | Django ドキュメント | Django](https://docs.djangoproject.com/ja/3.2/topics/class-based-views/)
1. 現場で使える Django の教科書《基礎編》 # 5.2 ビュー関数の書き方（関数ベース vs クラスベース）
1. [はじめての Django アプリ作成、その 1 | Django ドキュメント | Django # はじめてのビュー作成](https://docs.djangoproject.com/ja/3.2/intro/tutorial01/#write-your-first-view)
1. 現場で使える Django の教科書《基礎編》 # 第5章 ビュー
