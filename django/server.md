# サーバーの構築

## ConoHaコントロールパネルへのアクセス
1. 下記からConoHaコントロールパネルを開く。
   - [ConoHaコントロールパネル](https://manage.conoha.jp/Dashboard/)

## サーバーの追加

### 購入済みサーバーの場合
1. **サーバー追加**をクリックする。
2. **VPS**タブを開く。
3. 下記を設定する。
   - **料金タイプ**: `VPS割引きっぷSSLセット`
   - **利用するきっぷ**: `購入済み`
   - **プラン**: `メモリ 8GB / 2023-07-22 ~ 2024-07-22`
   - **イメージタイプ > OS**: `Ubuntu 22.04 (64bit)`
   - **root パスワード**: 【パスワード】
   - **ネームタグ**: `rsl＊＊＊`（学生のRSL番号）
   - **オプション**
     - **自動バックアップ**: `無効`
     - **追加ディスク**: `使用しない`
     - **接続許可ポート IPv4**: `全て許可`
     - **接続許可ポート IPv6**: `全て拒否`
     - **SSH Key**（作成前）: **キーを新規作成** # 設定後、**[+追加]**ボタンをクリックし、プライベートキーをダウンロードする。
       - **登録方法**: `自動作成`
       - **ネームタグ**: `rsl＊＊＊-key`（学生のRSL番号）
     - **SSH Key**（作成後）: **キーを選択**
       - **パブリックキーを選択**: `rsl＊＊＊-key`（学生のRSL番号）
     - **スタートアップスクリプト**: `使用しない`
4. **追加**ボタンをクリックする。

### 時間課金で新規に利用する場合
1. **サーバー追加**をクリックする。
2. **VPS**タブを開く。
3. 下記を設定する。
   - **料金タイプ**: `時間課金`
   - **プラン**: `メモリ 1GB / CPU 2Core / SSD 100GB`
   - **イメージタイプ > OS**: `Ubuntu 22.04 (64bit)`
   - **root パスワード**: 【パスワード】
   - **ネームタグ**: `rsl＊＊＊`（学生のRSL番号）
   - **オプション**
     - **自動バックアップ**: `無効`
     - **追加ディスク**: `使用しない`
     - **接続許可ポート IPv4**: `全て許可`
     - **接続許可ポート IPv6**: `全て拒否`
     - **SSH Key**（作成前）: **キーを新規作成** # 設定後、**[+追加]**ボタンをクリックし、プライベートキーをダウンロードする。
       - **登録方法**: `自動作成`
       - **ネームタグ**: `rsl＊＊＊-key`（学生のRSL番号）
     - **SSH Key**（作成後）: **キーを選択**
       - **パブリックキーを選択**: `rsl＊＊＊-key`（学生のRSL番号）
     - **スタートアップスクリプト**: `使用しない`
4. **追加**ボタンをクリックする。

## サーバーの起動
1. **サーバー**をクリックする。
2. **サーバーリスト**から起動したいサーバのネームタグをクリックする。
   1. **コンソール**ボタンをクリックする。
   2. 端末が開くので、下記のとおりrootでログインする。

```bash
Ubuntu 22.04.1 LTS ＊＊＊-＊＊＊-＊＊＊-＊＊＊ tty1

＊＊＊-＊＊＊-＊＊＊-＊＊＊ login: root
Password: 【パスワード】
root@＊:~#
```

## rslユーザの追加
```bash
root@＊:~# sudo adduser rsl
root@＊:~# sudo gpasswd -a rsl sudo
root@＊:~# cat /etc/passwd
root@＊:~# cat /etc/group
root@＊:~# groups rsl
root@＊:~# exit
```

コンソールから作成したユーザでログインしなおす。
```bash
Ubuntu 22.04.1 LTS ＊＊＊-＊＊＊-＊＊＊-＊＊＊ tty1

＊＊＊-＊＊＊-＊＊＊-＊＊＊ login: rsl
Password: 【パスワード】
rsl@＊:~$
```

