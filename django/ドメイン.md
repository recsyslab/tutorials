# ドメイン

## ドメインの取得
1. ConoHaコントロールパネルを開く。
   1. **ドメイン > ドメイン**をクリックする。
   2. **ドメイン取得**ボタンをクリックする。
   3. ドメイン名に希望のドメイン名を入力し検索する。
   4. 希望のドメイン名を選択し、**カートに追加**ボタンをクリックする。
   5. 支払処理にすすむ。

※ここでは、`recsyslab-ex.org`というドメインを取得したとする。

## ドメインの設定
1. ConoHaコントロールパネルを開く。
   1. **DNS**をクリックする。
      1. **+ドメイン**ボタンをクリックする。
      2. 取得したドメイン名を入力し、**保存**ボタンをクリックする。
      3. **ドメインリスト**にドメインが追加される。
      4. ドメイン名の部分をクリックすると、DNSレコード一覧が表示される。
      5. **編集**アイコンをクリックする。
      6. 下記のように設定する。
         - `A, @, 3600, ＊＊＊.＊＊＊.＊＊＊.＊＊＊`
         - `A, www, 3600, ＊＊＊.＊＊＊.＊＊＊.＊＊＊`
         - `A, rsl＊＊＊, 3600, ＊＊＊.＊＊＊.＊＊＊.＊＊＊`
         - `CNAME, ftp, 3600, ＊＊＊.＊＊＊.＊＊＊.＊＊＊`
         - `＊＊＊.＊＊＊.＊＊＊.＊＊＊`はドメイン設定対象のサーバーのIPアドレス。別のサーバのIPアドレスを指定することも可能。
      7. ドメイン設定が反映された後、下記にアクセスし、Webページが表示されれば正常にドメインが設定されている。
         - （ドメインの設定が反映されるまで数時間かかる。）
         - `http://recsyslab-ex.org/`
         - `http://www.recsyslab-ex.org/`
         - `http://rsl＊＊＊.recsyslab-ex.org/`

#### 参考
1. [サーバーにドメインの設定を追加する｜ConoHa WINGサポート](https://support.conoha.jp/w/adddomain/)
2. [DNSを使う｜ConoHa VPSサポート](https://support.conoha.jp/v/dns/)

## HTTPS化

### CSRの生成

```bash
$ openssl genrsa -aes256 -out ssl_private_key.pem.key 2048
Generating RSA private key, 2048 bit long modulus (2 primes)
......+++++
..........................................................................+++++
e is 65537 (0x010001)
Enter pass phrase for ssl_private_key.pem.key:【パスフレーズ】
Verifying - Enter pass phrase for ssl_private_key.pem.key:【パスフレーズ】
$ openssl req -new -key ssl_private_key.pem.key -out ssl.csr
Enter pass phrase for ssl_private_key.pem.key:【パスフレーズ】
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:JP
State or Province Name (full name) [Some-State]:Shiga
Locality Name (eg, city) []:Otsu
Organization Name (eg, company) [Internet Widgits Pty Ltd]:Ryukoku University
Organizational Unit Name (eg, section) []:
Common Name (e.g. server FQDN or YOUR name) []:*recsyslab-ex.org
Email Address []:

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
$ cat ssl.csr
```

