# リポジトリの作成

## リポジトリの作成
1. organizationsのトップページから、**Repositories**を開く。
   1. **New repository**ボタンをクリックする。
      1. 下記を設定する。
         - **Owner**: `recsyslab`
         - **Repository name**: 【リポジトリ名】
         - **Public/Private**: `Public`
         - **Add a README file**: チェック
         - **Add .gitignore**: （任意）
         - **Choose a license**: （任意）
      2. **Create repository**ボタンをクリックする。

## リポジトリにアクセス
下記URLでリポジトリにアクセスできる。
- `https://github.com/recsyslab/【リポジトリ名】/`

## GitHub Pagesの作成

1. リポジトリのトップページから**Settings - Pages**を開く。
   1. 下記を設定する。
      - **Source**: `main/(root)`
   2. **Save**ボタンをクリックする。
   3. **Choose a theme**ボタンをクリックする。
      - 好きなテーマを選択し、**Select theme**ボタンをクリックする。
      - `README.md`編集画面が表示されるので、**Commit changes**ボタンをクリックする。
      - `_config.yml`が作成される。

下記にアクセスして`README.md`がテーマのデザインで表示されるか確認する。
- `https://recsyslab.github.io/【リポジトリ名】/`
  - 表示が反映されるまで数分かかる。

## Google Search Consoleの設定
1. Google Search Consoleにアクセスする。
   - https://search.google.com/search-console
2. 左上の**プロパティを検索**から**＋プロパティを追加**をクリックする。
   1. **URLプレフィックス**のURL欄に上記のリポジトリのURLを入力する。
   2. **続行**ボタンをクリックする。
   3. **所有権の確認**ページから指定されたHTMLファイル`google*.html`をダウンロードする。
      1. ダウンロードしたHTMLファイル`google*.html`をGitHub上の指定された**アップロード先**にアップロードする。
      2. 下記のURLでアクセスできることを確認する
         - https://recsyslab.github.io/【リポジトリ名】/google*.html
           - アップロードが反映されるまで少し時間がかかる可能性がある。
   4. **確認**ボタンをクリックする。
      - 「所有権を証明しました」と表示されればOK
   5. **完了**ボタンをクリックする。

## Google Analytics
1. Google Analyticsにアクセスする。
   - https://analytics.google.com/
2. 管理画面を開く。
   1. アカウントを新規作成する場合
      1. **＋アカウントを作成**ボタンをクリックする。
      2. 下記を設定する。
         - **アカウント名**：【アカウント名】
      3. **次へ**ボタンをクリックする。
   2. **＋プロパティを作成**ボタンをクリックする。
      1. 下記を設定する。
         - **プロパティ名**: 【プロパティ名】（サイト名など）
         - **レポートのタイムゾーン**: `日本`
         - **通過**：`日本円（JPY \）`
      2. **次へ**ボタンをクリックする。
      3. **作成**ボタンをクリックする。
      4. Google アナリティクス利用規約で**同意する**ボタンをクリックする。
   3. **データストリーム**を開く。
      1. [ウェブ]ボタンをクリックする。
      2. 下記を設定する。
         - **ウェブサイトのURL**: 【WebサイトのURL】
         - **ストリーム名**: 【Webサイト名】
         - 拡張計測機能を選択する。
      3. **ストリームを作成**ボタンをクリックする。
      4. 表示される測定IDをコピーする。

## リポジトリのclone
1. リポジトリのトップページの**Code - SSH**タブからcloneする際に指定するパスを確認する。

```bash
mkdir -p 【リポジトリの保存先ディレクトリ】
cd 【リポジトリの保存先ディレクトリ】
git clone git@github.com:recsyslab/【リポジトリ名】.git
cd 【リポジトリ名】
ls
```

## _config.ymlの編集

```bash
vi _config.yml
```

`_config.yml`を下記のように編集する。
```bash
theme: 【テーマ名】
google_analytics: 【Google Analyticsからコピーした測定ID】
plugins:
  - jekyll-sitemap
```

```bash
git add _config.yml
git commit -m "_config.yml"
git log
git push
```

1. 下記URLにアクセスし、`sitemap.xml`と`robots.txt`が自動生成されていることを確認する。
   - `https://recsyslab.github.io/【リポジトリ名】/sitemap.xml`
   - `https://recsyslab.github.io/【リポジトリ名】/robots.txt`

## Google Search Consoleへのsitemap.xmlの登録
1. Google Search Consoleにアクセスする。
   - https://search.google.com/search-console
2. **サイトマップ**を開く。
   1. **新しいサイトマップの追加**に、`sitemap.xml`のURLを入力する。
   2. **送信**ボタンをクリックする。
      - 反映されるまで数日待ってみる。
      - 数日待っても取得できなかったので、[URL検査]から手動で一つ一つ登録するしかない？

#### 参考
- teratail, [GitHub Pagesで作ったサイトのsitemap.xmlが存在しているのにGoogle Search Consoleで検出されない](https://teratail.com/questions/363538?link=qa_related_pc)

